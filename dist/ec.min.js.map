{"version":3,"file":"ec.min.js","sources":["../src/common/getTime.js","../src/init.js","../src/index.js"],"sourcesContent":["const date = new Date();\r\nconst timeStr = `${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()} ${date.getHours()}: ${date.getMinutes()}:${date.getSeconds()}}`;\r\nexport default timeStr;","import timeStr from './common/getTime.js';\r\n\r\nfunction initEc(Ec) { //初始化这个类\r\n\tEc.prototype.init = (cb) => {\r\n\t\tthis.ecData = {\r\n\t\t\terrorMesg: '', //错误信息\r\n\t\t\terrorTip: '', //针对错误信息，做出的人性化提示\r\n\t\t\terrorFile: '', //错误文件路径名称\r\n\t\t\terrorLine: '', //错误代码行\r\n\t\t\terrorColum: '', //错误代码列\r\n\t\t\tuserAgent: { //用户代理信息\r\n\r\n\t\t\t},\r\n\t\t\terrorTime: '', //发生错误的事件\r\n\t\t\tuserLocation: '' //发生错误所处地点\r\n\t\t}\r\n\t\tthis.cb = cb;\r\n\t\tbindEvent(ec);\r\n\t}\r\n}\r\n\r\nfunction bindEvent(ec) { //给window绑定错误事件处理程序\r\n\twindow.onerror = (errorMesg, errorUrl, errorLine, errorColum, other) => { //如果页面触发了错误\r\n\t\t//获取这些错误信息\r\n\t\tec.ecData.errorMesg = errorMesg;\r\n\t\tec.ecData.errorFile = errorFile;\r\n\t\tec.ecData.errorLine = errorLine;\r\n\t\tec.ecData.errorColum = errorColum;\r\n\t\tec.ecData.errorTime = timeStr;\r\n\r\n\t\t//执行初始化时用户传入的回调函数，在该函数中执行对错误信息的上报操作\r\n\t\tthis.cb();\r\n\t}\r\n}\r\n\r\nexport default {\r\n\tinitEc\r\n}","import initEc from './init.js';\r\n\r\nfunction Ec(cb) {\r\n\tthis.init(cb);\r\n}\r\ninitEc();\r\nexport default Ec;"],"names":["date","Date","timeStr","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","initEc","Ec","prototype","init","cb","ecData","errorMesg","errorTip","errorFile","errorLine","errorColum","userAgent","errorTime","userLocation","bindEvent","ec","window","onerror","errorUrl","other"],"mappings":";;;;;;;;;CAAA,IAAMA,OAAO,IAAIC,IAAJ,EAAb;CACA,IAAMC,UAAaF,KAAKG,WAAL,EAAb,UAAmCH,KAAKI,QAAL,KAAgB,CAAnD,UAAwDJ,KAAKK,OAAL,EAAxD,SAA0EL,KAAKM,QAAL,EAA1E,UAA8FN,KAAKO,UAAL,EAA9F,SAAmHP,KAAKQ,UAAL,EAAnH,MAAN;;CCCA,SAASC,MAAT,CAAgBC,EAAhB,EAAoB;CAAA;;CAAE;CACrBA,IAAGC,SAAH,CAAaC,IAAb,GAAoB,UAACC,EAAD,EAAQ;CAC3B,QAAKC,MAAL,GAAc;CACbC,cAAW,EADE;CAEbC,aAAU,EAFG;CAGbC,cAAW,EAHE;CAIbC,cAAW,EAJE;CAKbC,eAAY,EALC;CAMbC,cAAW;;CAAA,IANE;CASbC,cAAW,EATE;CAUbC,iBAAc,EAVD;CAAA,GAAd;CAYA,QAAKT,EAAL,GAAUA,EAAV;CACAU,YAAUC,EAAV;CACA,EAfD;CAgBA;;CAED,SAASD,SAAT,CAAmBC,EAAnB,EAAuB;CAAA;;CAAE;CACxBC,QAAOC,OAAP,GAAiB,UAACX,SAAD,EAAYY,QAAZ,EAAsBT,SAAtB,EAAiCC,UAAjC,EAA6CS,KAA7C,EAAuD;CAAE;CACzE;CACAJ,KAAGV,MAAH,CAAUC,SAAV,GAAsBA,SAAtB;CACAS,KAAGV,MAAH,CAAUG,SAAV,GAAsBA,SAAtB;CACAO,KAAGV,MAAH,CAAUI,SAAV,GAAsBA,SAAtB;CACAM,KAAGV,MAAH,CAAUK,UAAV,GAAuBA,UAAvB;CACAK,KAAGV,MAAH,CAAUO,SAAV,GAAsBnB,OAAtB;;CAEA;CACA,SAAKW,EAAL;CACA,EAVD;CAWA;;AAED,gBAAe;CACdJ;CADc,CAAf;;CCjCA,SAASC,EAAT,CAAYG,EAAZ,EAAgB;CACf,MAAKD,IAAL,CAAUC,EAAV;CACA;AACDJ;;;;;;;;"}