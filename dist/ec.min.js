
/**诺诺金服前端团队
 *创建于2018-8-2 17: 54:40}
*/
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) :
	(global.Ec = factory());
}(this, (function () {
	var date = new Date();
	var timeStr = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate() + " " + date.getHours() + ": " + date.getMinutes() + ":" + date.getSeconds() + "}";

	function initEc(Ec) {
		var _this = this;

		//初始化这个类
		Ec.prototype.init = function (cb) {
			_this.ecData = {
				errorMesg: '', //错误信息
				errorTip: '', //针对错误信息，做出的人性化提示
				errorFile: '', //错误文件路径名称
				errorLine: '', //错误代码行
				errorColum: '', //错误代码列
				userAgent: {//用户代理信息

				},
				errorTime: '', //发生错误的事件
				userLocation: '' //发生错误所处地点
			};
			_this.cb = cb;
			bindEvent(ec);
		};
	}

	function bindEvent(ec) {
		var _this2 = this;

		//给window绑定错误事件处理程序
		window.onerror = function (errorMesg, errorUrl, errorLine, errorColum, other) {
			//如果页面触发了错误
			//获取这些错误信息
			ec.ecData.errorMesg = errorMesg;
			ec.ecData.errorFile = errorFile;
			ec.ecData.errorLine = errorLine;
			ec.ecData.errorColum = errorColum;
			ec.ecData.errorTime = timeStr;

			//执行初始化时用户传入的回调函数，在该函数中执行对错误信息的上报操作
			_this2.cb();
		};
	}

	var initEc$1 = {
		initEc: initEc
	};

	function Ec(cb) {
		this.init(cb);
	}
	initEc$1();

	return Ec;

})));
//# sourceMappingURL=ec.min.js.map
